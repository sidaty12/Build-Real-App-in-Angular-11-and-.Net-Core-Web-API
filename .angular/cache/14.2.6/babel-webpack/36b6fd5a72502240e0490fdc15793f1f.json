{"ast":null,"code":"import { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function expand(project, concurrent = Number.POSITIVE_INFINITY, scheduler = undefined) {\n  concurrent = (concurrent || 0) < 1 ? Number.POSITIVE_INFINITY : concurrent;\n  return source => source.lift(new ExpandOperator(project, concurrent, scheduler));\n}\nexport class ExpandOperator {\n  constructor(project, concurrent, scheduler) {\n    this.project = project;\n    this.concurrent = concurrent;\n    this.scheduler = scheduler;\n  }\n\n  call(subscriber, source) {\n    return source.subscribe(new ExpandSubscriber(subscriber, this.project, this.concurrent, this.scheduler));\n  }\n\n}\nexport class ExpandSubscriber extends OuterSubscriber {\n  constructor(destination, project, concurrent, scheduler) {\n    super(destination);\n    this.project = project;\n    this.concurrent = concurrent;\n    this.scheduler = scheduler;\n    this.index = 0;\n    this.active = 0;\n    this.hasCompleted = false;\n\n    if (concurrent < Number.POSITIVE_INFINITY) {\n      this.buffer = [];\n    }\n  }\n\n  static dispatch(arg) {\n    const {\n      subscriber,\n      result,\n      value,\n      index\n    } = arg;\n    subscriber.subscribeToProjection(result, value, index);\n  }\n\n  _next(value) {\n    const destination = this.destination;\n\n    if (destination.closed) {\n      this._complete();\n\n      return;\n    }\n\n    const index = this.index++;\n\n    if (this.active < this.concurrent) {\n      destination.next(value);\n\n      try {\n        const {\n          project\n        } = this;\n        const result = project(value, index);\n\n        if (!this.scheduler) {\n          this.subscribeToProjection(result, value, index);\n        } else {\n          const state = {\n            subscriber: this,\n            result,\n            value,\n            index\n          };\n          const destination = this.destination;\n          destination.add(this.scheduler.schedule(ExpandSubscriber.dispatch, 0, state));\n        }\n      } catch (e) {\n        destination.error(e);\n      }\n    } else {\n      this.buffer.push(value);\n    }\n  }\n\n  subscribeToProjection(result, value, index) {\n    this.active++;\n    const destination = this.destination;\n    destination.add(subscribeToResult(this, result, value, index));\n  }\n\n  _complete() {\n    this.hasCompleted = true;\n\n    if (this.hasCompleted && this.active === 0) {\n      this.destination.complete();\n    }\n\n    this.unsubscribe();\n  }\n\n  notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n    this._next(innerValue);\n  }\n\n  notifyComplete(innerSub) {\n    const buffer = this.buffer;\n    const destination = this.destination;\n    destination.remove(innerSub);\n    this.active--;\n\n    if (buffer && buffer.length > 0) {\n      this._next(buffer.shift());\n    }\n\n    if (this.hasCompleted && this.active === 0) {\n      this.destination.complete();\n    }\n  }\n\n}","map":{"version":3,"names":["OuterSubscriber","subscribeToResult","expand","project","concurrent","Number","POSITIVE_INFINITY","scheduler","undefined","source","lift","ExpandOperator","constructor","call","subscriber","subscribe","ExpandSubscriber","destination","index","active","hasCompleted","buffer","dispatch","arg","result","value","subscribeToProjection","_next","closed","_complete","next","state","add","schedule","e","error","push","complete","unsubscribe","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","notifyComplete","remove","length","shift"],"sources":["C:/DevSid/Projet/App-Angular/my-first-app/node_modules/rxjs/_esm2015/internal/operators/expand.js"],"sourcesContent":["import { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function expand(project, concurrent = Number.POSITIVE_INFINITY, scheduler = undefined) {\n    concurrent = (concurrent || 0) < 1 ? Number.POSITIVE_INFINITY : concurrent;\n    return (source) => source.lift(new ExpandOperator(project, concurrent, scheduler));\n}\nexport class ExpandOperator {\n    constructor(project, concurrent, scheduler) {\n        this.project = project;\n        this.concurrent = concurrent;\n        this.scheduler = scheduler;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new ExpandSubscriber(subscriber, this.project, this.concurrent, this.scheduler));\n    }\n}\nexport class ExpandSubscriber extends OuterSubscriber {\n    constructor(destination, project, concurrent, scheduler) {\n        super(destination);\n        this.project = project;\n        this.concurrent = concurrent;\n        this.scheduler = scheduler;\n        this.index = 0;\n        this.active = 0;\n        this.hasCompleted = false;\n        if (concurrent < Number.POSITIVE_INFINITY) {\n            this.buffer = [];\n        }\n    }\n    static dispatch(arg) {\n        const { subscriber, result, value, index } = arg;\n        subscriber.subscribeToProjection(result, value, index);\n    }\n    _next(value) {\n        const destination = this.destination;\n        if (destination.closed) {\n            this._complete();\n            return;\n        }\n        const index = this.index++;\n        if (this.active < this.concurrent) {\n            destination.next(value);\n            try {\n                const { project } = this;\n                const result = project(value, index);\n                if (!this.scheduler) {\n                    this.subscribeToProjection(result, value, index);\n                }\n                else {\n                    const state = { subscriber: this, result, value, index };\n                    const destination = this.destination;\n                    destination.add(this.scheduler.schedule(ExpandSubscriber.dispatch, 0, state));\n                }\n            }\n            catch (e) {\n                destination.error(e);\n            }\n        }\n        else {\n            this.buffer.push(value);\n        }\n    }\n    subscribeToProjection(result, value, index) {\n        this.active++;\n        const destination = this.destination;\n        destination.add(subscribeToResult(this, result, value, index));\n    }\n    _complete() {\n        this.hasCompleted = true;\n        if (this.hasCompleted && this.active === 0) {\n            this.destination.complete();\n        }\n        this.unsubscribe();\n    }\n    notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this._next(innerValue);\n    }\n    notifyComplete(innerSub) {\n        const buffer = this.buffer;\n        const destination = this.destination;\n        destination.remove(innerSub);\n        this.active--;\n        if (buffer && buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        if (this.hasCompleted && this.active === 0) {\n            this.destination.complete();\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}